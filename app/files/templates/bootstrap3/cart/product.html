{% extends 'bootstrap3/layout.html' %}

{% block content %}

    <div class="row">
        <div class="col-md-12">
            <h1 class="sub-header">
                {{ product_item.model }}
                <small>{{ product_item.manufacturer.title }}</small>
            </h1>
        </div>
    </div>

    <div class="row">
        <div class="col-md-6">
            {% if product_item.image %}
                <img class="img-responsive" src="{{ MEDIA_URL }}{{ product_item.image }}" alt="">
            {% else %}
                <img class="img-responsive" src="http://placehold.it/750x500" alt="">
            {% endif %}
        </div>
        <div class="col-md-6">
            <h3>Description</h3>
            <p>{{ product_item.info|safe }}</p>
            <h3>Details</h3>
            <dl class="dl-horizontal">
                <dt>Size</dt>
                <dd>{{ product_item.size }}</dd>
                <dt>Weight</dt>
                <dd>{{ product_item.weight }}</dd>
            </dl>
        </div>
    </div>

    <br />

    {% if product_item.productimage_set %}
        <div class="row">
            <div class="col-lg-12">
                <h3 class="page-header">More photos</h3>
            </div>
            {% for product_image in product_item.productimage_set.all %}
                <div class="col-sm-3 col-xs-6">
                    <a href="#">
                        <img class="img-responsive portfolio-item" src="
                                {{ MEDIA_URL }}{{ product_image.image }}" alt="">
                    </a>
                </div>
            {% endfor %}
        </div>
    {% endif %}

    <div class="row">
        <div class="col-lg-12">
            <ul class="nav nav-tabs" role="tablist">
                <li class="active"><a href="#shops" role="tab" data-toggle="tab">Shops</a></li>
                <li><a href="#characteristics" role="tab" data-toggle="tab">Characteristics</a></li>
                <li><a href="#review" role="tab" data-toggle="tab">Review</a></li>
            </ul>
            <div class="tab-content">
                <div class="tab-pane active" id="shops">
                    <ul class="media-list">
                        {% for shop_product in product_item.shopproduct_set.all %}
                            <li class="media">
                                <a class="pull-left" href="#">
                                    <img class="media-object" src="


                                            {{ MEDIA_URL }}{{ shop_product.shop.image }}" alt="{{ shop_product.shop.title }}" width="128">
                                </a>
                                <div class="media-body">
                                    <h4 class="media-heading">{{ shop_product.shop.title }} - {{ shop_product.price }} {{ shop_product.currency.title }}</h4>
                                    {{ shop_product.product.info|safe }}
                                </div>
                            </li>
                        {% endfor %}
                    </ul>
                </div>
                <div class="tab-pane" id="characteristics">
                    {% regroup product_item.productattribute_set.all by attribute.group.title as attribute_group_list %}
                    <table class="table">
                        <thead>
                        <th>Attribute</th>
                        <th>Value</th>
                        </thead>
                        <tbody>
                        {% for group in attribute_group_list %}
                            <tr>
                                <td colspan="2">
                                    <i>{{ group.grouper }}</i>
                                </td>
                            </tr>
                            {% for product_item_attribute in group.list %}
                                <tr>
                                    <td>{{ product_item_attribute.attribute.title }}</td>
                                    <td>{{ product_item_attribute.value }}</td>
                                </tr>
                            {% endfor %}
                        {% endfor %}
                        </tbody>
                    </table>
                </div>
                <div class="tab-pane" id="review">Review ...3</div>
            </div>
        </div>
    </div>

{% endblock %}